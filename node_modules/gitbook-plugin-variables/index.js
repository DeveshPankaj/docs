!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.gitbookPluginVariables=t():e.gitbookPluginVariables=t()}(global,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),o=r(2),i=r(3),s=r(4),a=r(5),u=r(6);async function f(e,t,r,f){const c=await n(function(e){if(void 0===e)return[];return s.isArray(e)?e:[e]}(e),{cwd:f});if(t&&!c.length)throw new Error(`No files to load were found matching ${JSON.stringify(e)}`);const p=await Promise.all(c.map(e=>(async function(e,t){if(e.match(/\.ya?ml$/))return l(e,i.safeLoad(await o.readFile(e,"utf8")),t);if(e.match(/\.js(?:on)?$/)){const r=a(e);return l(e,await("function"==typeof r?r():r),t)}throw new Error(`Only .js, .json and .yml files are supported by the variables plugin: "${e}" is not a supported format`)})(u.resolve(f,e),r)));return s.reduce(p,(e,t)=>s.isArray(e)&&s.isArray(t)?[...e,...t]:s.isPlainObject(e)&&s.isPlainObject(t)?Object.assign({},e,t):t)}function l(e,t,r){if(r&&!s.isPlainObject(t))throw new Error(`File "${e}" exports a value of type ${typeof t}, but a plain object is required`);return t}t.blocks={},t.filters={},t.hooks={init:async function(){const e=this.resolve("."),t=this.config.values,r=s.defaults({},t.pluginsConfig.variables,{files:{}}),n={},o=r.files;if("string"==typeof o||s.isArray(o))s.assign(n,await f(o,!0,!0,e));else{s.each(r.files,(t,r)=>{n[r]=f(t,!0,!1,e)});for(const e in n)n[e]=await n[e]}this.config.set("variables",Object.assign({},this.config.get("variables"),n))}}},function(e,t){e.exports=require("fast-glob")},function(e,t){e.exports=require("fs-extra")},function(e,t){e.exports=require("js-yaml")},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("native-require")},function(e,t){e.exports=require("path")}])});
//# sourceMappingURL=index.map.js